angular.module("hyde",["ngRoute","ngAnimate","ngDisqus"]).config(["$routeProvider","$disqusProvider","$locationProvider",function($routeProvider,$disqusProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"/home.html",reloadOnSearch:false}).when("/:link*",{templateUrl:function(params){var link=params.link;if(link.substr(link.length-4,link.length)!="html")link+="/index.html";return link}});$disqusProvider.setShortname("scriptaholic");$locationProvider.hashPrefix("!")}]).directive("a",["$location",
function($location){return{restrict:"E",link:function(scope,elem,attrs){elem.on("click",function(e){if(attrs.href.substr(0,4)=="http"||attrs.href.substr(0,3)=="www")return;else{e.preventDefault();$location.path(attrs.href);scope.$apply()}})}}}]).directive("additive",[function(){return{restrict:"E",scope:{bgColor:"@",color:"@"},link:function(scope){$("body").animate({backgroundColor:scope.bgColor,borderTopColor:scope.color},1E3);$("#header > .title > a").animate({"color":scope.color})}}}]).controller("expandableCtrl",
function($scope){$(".expandable").on("click",function(){if($(this).hasClass("expanded")){$(this).removeClass("expanded");$(this).animate({height:"29px"},500)}else{$(".expanded").animate({height:"29px"},500);$(".expandable").removeClass("expanded");$(this).addClass("expanded");var height=$scope.getHeight($(this));$(this).animate({height:height},500)}});$("blockquote").on("click",function(){console.log("clicked");if($(this).hasClass("expanded")){$(this).removeClass("expanded");$(this).animate({height:"13px"},
500)}else{$(this).addClass("expanded");var height=$scope.getHeight($(this));$(this).animate({height:height},500)}});$scope.getHeight=function(element){var clone=element.clone().css({"height":"auto"}).appendTo("body");var height=clone.css("height");clone.remove();return height}}).controller("rootCtrl",function($scope,$location){$scope.setSearch=function(categorie){$scope.$broadcast("filter",categorie);$location.search("filter",categorie)}}).controller("listCtrl",function($scope,$routeParams){$scope.$on("filter",
function(event,newVal){$scope.hide(newVal)});$scope.hide=function(cat){$(".posts > li").removeClass("hide");if(!cat){$(".posts > li").removeClass("hide");return}var post=$(".posts > li").first();$scope.hideByCategorie(post,cat);for(var i=0;i<$(".posts > li").length;i++){post=post.next();$scope.hideByCategorie(post,cat)}};$scope.hideByCategorie=function(post,cat){var first=post.find(">:first-child");if(!first.hasClass(cat))post.addClass("hide")};if($routeParams.filter)$scope.hide($routeParams.filter)});
!function(a,b){var c=a.module("ngDisqus",[]);c.provider("$disqus",function(){function c(){return document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]}function d(){return l||b.disqus_shortname}function e(a,b){return"//"+a+".disqus.com/"+b}function f(a){var b=document.createElement("script");return b.type="text/javascript",b.async=!0,b.src=a,b}function g(a,b){var c,d,e=a.getElementsByTagName("script");for(d=0;d<e.length;d+=1)if(c=e[d],~c.src.indexOf(b))return!0;return!1}
function h(a,c,d){b.disqus_identifier=a,b.disqus_url=c,b.disqus_shortname=d}function i(){var c=b.DISQUSWIDGETS;c&&(a.isFunction(c.getCount)&&c.getCount())}function j(a,c){b.DISQUS.reset({reload:!0,config:function(){this.page.identifier=c,this.page.url=a.absUrl()}})}function k(a,b){var d=c(),h=e(a,b);g(d,h)||d.appendChild(f(h))}var l,m="embed.js",n="count.js";this.setShortname=function(a){l=a},this.$get=["$location",function(c){function e(e){var f=d();if(!a.isDefined(f))throw new Error("No disqus shortname defined");
if(!a.isDefined(e))throw new Error("No disqus thread id defined");a.isDefined(b.DISQUS)?j(c,e):(h(e,c.absUrl(),f),k(f,m))}function f(a){h(a,c.absUrl(),l),k(d(),m),k(d(),n),i()}return{commit:e,getShortname:d,loadCount:f}}]}),c.directive("disqus",["$disqus",function(b){return{restrict:"AC",replace:!0,scope:{id:"=disqus"},template:'<div id="disqus_thread"></div>',link:function(c){c.$watch("id",function(c){a.isDefined(c)&&b.commit(c)})}}}]),c.directive("disqusIdentifier",["$disqus",function(a){return{restrict:"A",
link:function(b,c,d){a.loadCount(d.disqusIdentifier)}}}])}(angular,this);